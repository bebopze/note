
### 3. 并发设计模式


``` 
    3.1 
    
    
    
    3.2
    
    
    
    3.3 
    
        Q： 实际工作中，有很多平台型的技术方案都是采用 ThreadLocal 来传递一些上下文信息，
            例如 Spring使用 ThreadLocal 来传递事务信息。
            我们曾经说过，异步编程已经很成熟了，那你觉得在异步场景中，是否可以使用 Spring 的事务管理器呢？
        
        A：  不可以，因为 ThreadLocal内的变量 是 线程级别 的，而 异步编程 意味着 线程不同，不同线程的变量 不可以共享！
        
        
        Q： 有个疑问请教老师，避免共享变量的两种解决方案，在高并发情况下，使用局部变量会频繁创建对象，
            使用threadlocal也是针对线程创建新变量，都是针对线程维度，t
            hreadlocal并未体现出什么优势，为什么还要用 ThreadLocal ？
            
        A： ThreadLocal = 线程数，局部变量 = 调用量，差距太大了！



    3.4
            
        Q： 老师，我有个疑问，希望帮忙解答。如果Web应用是集群的，A节点处理HTTP请求后发了MQ，B节点的onMessage消费了回执消息，那么A节点怎么把结果响应给客户端呢？疑问好久了，希望老师给个思路，谢谢！
        
        A： 我了解有人是这么做的：把回执消息放到redis的list中，按照ip重新分组之后从redis中再次消费。
            也可以按照ip建立不同的topic。
            
    
```